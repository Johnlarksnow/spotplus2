import{_ as v}from"./nuxt-link.6b940b85.js";import{_ as y}from"./Alert.vue.783b77e1.js";import{f as b,B as p,k as w,o as m,c as k,a as o,b as d,w as r,v as S,C as f,D as _,j as t,m as B,n as N,d as i,t as g}from"./entry.0e2e8ba9.js";import{u as V}from"./fetch.4516efe2.js";import{u as D}from"./store.a524df98.js";const T={class:"flex flex-col w-full gap-3 h-full justify-center items-center"},A={class:"flex gap-2 flex-col items-start justify-center"},C=o("h1",{class:"text-2xl font-bold"}," Login ",-1),j=["onSubmit"],E=o("button",{type:"submit",class:"bg-green-900 mt-2 text-white rounded-lg py-2 px-4"}," Login ",-1),Q=b({__name:"login",setup(I){const a=p({email:"",password:""}),e=p({type:"success",icon:"tabler:check",title:"Success",message:"You have successfully registered!"}),l=w(!1);async function h(){try{const{data:s}=await V("https://supgrade-api.site/api/v1/auth/login",{method:"POST",body:JSON.stringify(a)},"$4Q7McJQDXG");s.value.status!=="success"?(l.value=!0,e.icon="tabler:x",e.type="error",e.title="Error",e.message=s.value.message||"API is not reachable!",setTimeout(()=>{l.value=!1},3e3)):(l.value=!0,e.icon="tabler:check",e.type="success",e.title="Success",e.message="You have successfully logged in!",setTimeout(()=>{l.value=!1},3e3),D().signIn(s.value.token))}catch(s){console.log(s)}}return(s,n)=>{const u=v,x=y;return m(),k("div",T,[o("div",A,[d(u,{to:"/",class:"text-green-500 font*bold text-lg hover:text-green-400 transition-all"},{default:r(()=>[i(" ← Back to home ")]),_:1}),C,o("form",{class:"flex flex-col gap-2",onSubmit:S(h,["prevent"])},[f(o("input",{"onUpdate:modelValue":n[0]||(n[0]=c=>t(a).email=c),type:"email",placeholder:"Email",class:"input"},null,512),[[_,t(a).email]]),f(o("input",{"onUpdate:modelValue":n[1]||(n[1]=c=>t(a).password=c),type:"password",placeholder:"Password",class:"input"},null,512),[[_,t(a).password]]),E],40,j),d(u,{to:"/register",class:"text-green-500 hover:text-green-400 transition-all"},{default:r(()=>[i(" I don't have an account ")]),_:1})]),t(l)?(m(),B(x,{key:0,type:t(e).type,icon:t(e).icon},{title:r(()=>[i(g(t(e).title),1)]),default:r(()=>[i(" "+g(t(e).message),1)]),_:1},8,["type","icon"])):N("",!0)])}}});export{Q as default};
