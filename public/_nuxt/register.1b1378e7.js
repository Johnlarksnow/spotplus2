import{_ as h}from"./nuxt-link.6b940b85.js";import{_ as v}from"./Alert.vue.783b77e1.js";import{f as w,B as m,k as b,o as f,c as k,a as o,b as _,w as i,v as V,C as u,D as c,j as s,m as N,n as S,d as p,t as g}from"./entry.0e2e8ba9.js";import{u as B}from"./fetch.4516efe2.js";const T={class:"flex flex-col w-full gap-3 h-full justify-center items-center"},P={class:"flex gap-2 flex-col items-start justify-center"},U=o("h1",{class:"text-2xl font-bold"}," Register ",-1),q=["onSubmit"],C=o("button",{type:"submit",class:"bg-green-900 mt-2 text-white rounded-lg py-2 px-4"}," Register ",-1),I=w({__name:"register",setup(D){const a=m({username:"",email:"",password:"",password_repeat:""}),e=m({type:"success",icon:"tabler:check",title:"Success",message:"You have successfully registered!"}),r=b(!1);async function x(){var d;try{if(a.password!==a.password_repeat)r.value=!0,e.icon="tabler:asterisk",e.type="error",e.title="Error",e.message="Passwords do not match!",setTimeout(()=>{r.value=!1},3e3);else{const{data:t,error:n}=await B("https://supgrade-api.site/api/v1/auth/register",{method:"POST",body:JSON.stringify(a)},"$kuy4xN7t2Z");((d=t.value)==null?void 0:d.status)!=="success"||n?(r.value=!0,e.icon="tabler:x",e.type="error",e.title="Error",e.message=t.value.message||"API is not reachable!",setTimeout(()=>{r.value=!1},3e3)):(r.value=!0,e.icon="tabler:check",e.type="success",e.title="Success",e.message="You have successfully registered!",setTimeout(()=>{r.value=!1,router.push("/login")},3e3))}}catch(t){console.log(t)}}return(d,t)=>{const n=h,y=v;return f(),k("div",T,[o("div",P,[_(n,{to:"/",class:"text-green-500 font*bold text-lg hover:text-green-400 transition-all"},{default:i(()=>[p(" ← Back to home ")]),_:1}),U,o("form",{class:"flex flex-col gap-2",onSubmit:V(x,["prevent"])},[u(o("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>s(a).username=l),type:"text",placeholder:"Username",class:"input",required:""},null,512),[[c,s(a).username]]),u(o("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>s(a).email=l),type:"email",placeholder:"Email",class:"input",required:""},null,512),[[c,s(a).email]]),u(o("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>s(a).password=l),type:"password",placeholder:"Password",class:"input",required:""},null,512),[[c,s(a).password]]),u(o("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>s(a).password_repeat=l),type:"password",placeholder:"Repeat Password",required:"",class:"input"},null,512),[[c,s(a).password_repeat]]),C],40,q),_(n,{to:"/login",class:"text-green-500 hover:text-green-400 transition-all"},{default:i(()=>[p(" I have an account ")]),_:1})]),s(r)?(f(),N(y,{key:0,type:s(e).type,icon:s(e).icon},{title:i(()=>[p(g(s(e).title),1)]),default:i(()=>[p(" "+g(s(e).message),1)]),_:1},8,["type","icon"])):S("",!0)])}}});export{I as default};
